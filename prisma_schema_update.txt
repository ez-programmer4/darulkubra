// Add this to your schema.prisma file

model deduction_waivers {
  id             Int      @id @default(autoincrement())
  teacherId      String
  deductionType  String   // 'lateness' or 'absence'
  deductionDate  DateTime @db.Date
  originalAmount Decimal  @db.Decimal(10, 2)
  reason         String   @db.Text
  adminId        String
  createdAt      DateTime @default(now())

  @@unique([teacherId, deductionType, deductionDate], name: "unique_waiver")
  @@index([teacherId, deductionDate], name: "idx_teacher_date")
  @@index([deductionType, deductionDate], name: "idx_type_date")
  @@index([adminId], name: "idx_admin")
}

// Also update the absencerecord model to add waiver fields:
model absencerecord {
  // ... existing fields ...
  isWaived      Boolean? @default(false)
  waiverReason  String?  @db.Text
  
  // ... rest of existing fields ...
}